<header class="modern-header">
  <div class="header-content">
    <div class="header-left">
      <button id="menu-toggle" class="modern-hamburger" aria-label="Open menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <div class="brand-logo">
        <span class="brand-initials">CC</span>
      </div>
      <div class="brand-text">
        <span class="brand-subtitle">CASTLE COMMS</span>
        <span class="brand-title" id="page-title">LOADING...</span>
      </div>
    </div>
    <div class="header-center">
      <div class="user-greeting">Hi <span class="user-name" id="user-name-display">Loading...</span></div>
    </div>
    <div class="header-right">
      <div class="user-profile-dropdown">
        <button class="user-profile-btn" id="user-profile-btn">
          <span class="user-initials" id="user-initials">MD</span>
        </button>
        <div class="profile-dropdown-menu" id="profile-dropdown-menu">
          <div class="dropdown-header">
            <span class="dropdown-user-name" id="dropdown-user-name">Loading...</span>
            <span class="dropdown-user-email" id="dropdown-user-email">Loading...</span>
          </div>
          <div class="dropdown-divider"></div>
          <button class="dropdown-item" id="account-settings-btn">
            Account Settings
          </button>
          <button class="dropdown-item" id="change-password-btn">
            Change Password
          </button>
          <button class="dropdown-item dark-mode-toggle" onclick="toggleDarkMode()">
            Dark Mode: Off
          </button>
          <div class="dropdown-divider"></div>
          <button class="dropdown-item dropdown-signout" id="profile-signout-btn">
            Sign Out
          </button>
        </div>
      </div>
    </div>
  </div>
</header>

<!-- Change Password Modal -->
<div id="change-password-modal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Change Password</h2>
      <span class="close" id="change-password-close">&times;</span>
    </div>
    <div class="modal-body">
      <form id="change-password-form" class="modal-form">
        <div class="form-group">
          <label for="current-password">Current Password</label>
          <input type="password" id="current-password" name="currentPassword" required 
                 placeholder="Enter your current password">
        </div>
        <div class="form-group">
          <label for="new-password">New Password</label>
          <input type="password" id="new-password" name="newPassword" required 
                 placeholder="Enter your new password" minlength="6">
        </div>
        <div class="form-group">
          <label for="confirm-password">Confirm New Password</label>
          <input type="password" id="confirm-password" name="confirmPassword" required 
                 placeholder="Confirm your new password" minlength="6">
        </div>
        <div class="password-requirements">
          <small>Password must be at least 6 characters long</small>
        </div>
        <div class="form-actions">
          <button type="button" class="btn btn-secondary" id="change-password-cancel">Cancel</button>
          <button type="submit" class="btn btn-primary">Change Password</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Account Settings Modal -->
<div id="account-settings-modal" class="modal">
  <div class="modal-content account-settings-modal">
    <div class="modal-header">
      <h2>Account Settings</h2>
      <span class="close" id="account-settings-close">&times;</span>
    </div>
    <div class="modal-body">
      <form id="account-settings-form" class="modal-form">
        
        <!-- Profile Picture Section -->
        <div class="settings-section">
          <h3>Profile Picture</h3>
          <div class="profile-picture-options">
            <div class="current-profile-preview">
              <div class="profile-preview-circle" id="profile-preview">
                <span class="preview-initials" id="preview-initials">MD</span>
                <img class="preview-photo" id="preview-photo" style="display: none;" alt="Profile">
              </div>
              <p class="profile-preview-label">Current Profile</p>
            </div>
            
            <div class="profile-options">
              <!-- Photo Upload Option -->
              <div class="photo-upload-section">
                <label class="upload-label">
                  <input type="file" id="profile-photo-input" accept="image/*" style="display: none;">
                  <div class="upload-button">
                    <span>Upload Photo</span>
                  </div>
                </label>
                <button type="button" id="remove-photo-btn" class="remove-photo-btn" style="display: none;">
                  Remove Photo
                </button>
              </div>
              
              <!-- Color Selection -->
              <div class="color-selection-section">
                <p class="section-label">Choose Background Color:</p>
                <div class="color-grid">
                  <button type="button" class="color-option" data-color="#DC2626" style="background-color: #DC2626;" title="Crimson"></button>
                  <button type="button" class="color-option" data-color="#F97316" style="background-color: #F97316;" title="Pumpkin Orange"></button>
                  <button type="button" class="color-option" data-color="#F59E0B" style="background-color: #F59E0B;" title="Golden Amber"></button>
                  <button type="button" class="color-option" data-color="#FACC15" style="background-color: #FACC15;" title="Sunflower Yellow"></button>
                  <button type="button" class="color-option" data-color="#84CC16" style="background-color: #84CC16;" title="Lime"></button>
                  <button type="button" class="color-option" data-color="#10B981" style="background-color: #10B981;" title="Emerald"></button>
                  <button type="button" class="color-option" data-color="#14B8A6" style="background-color: #14B8A6;" title="Teal"></button>
                  <button type="button" class="color-option" data-color="#0EA5E9" style="background-color: #0EA5E9;" title="Sky Blue"></button>
                  <button type="button" class="color-option" data-color="#2563EB" style="background-color: #2563EB;" title="Royal Blue"></button>
                  <button type="button" class="color-option" data-color="#4F46E5" style="background-color: #4F46E5;" title="Indigo"></button>
                  <button type="button" class="color-option" data-color="#7C3AED" style="background-color: #7C3AED;" title="Violet"></button>
                  <button type="button" class="color-option" data-color="#45494E" style="background-color: #45494E;" title="Grey"></button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Display Name Section -->
        <div class="settings-section">
          <h3>Display Name</h3>
          <div class="form-group">
            <label for="display-name-input">Full Name</label>
            <input type="text" id="display-name-input" name="displayName" 
                   placeholder="Enter your full name" maxlength="50">
            <small class="field-help">This name will be shown throughout the application</small>
          </div>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" id="account-settings-cancel">Cancel</button>
          <button type="submit" class="btn btn-primary">Save Changes</button>
        </div>
      </form>
    </div>
  </div>
</div>